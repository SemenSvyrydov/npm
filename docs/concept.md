# Концепция вкладок и модулей

## 1. Пользовательский сценарий

### Создание вкладок
- Вкладки соответствуют **модулям проекта**.
- Количество вкладок определяется количеством модулей, реализованных в системе.
- На первом этапе планируется один модуль → одна вкладка.
- Архитектура должна позволять добавлять новые модули и вкладки без изменения базового каркаса.

### Переключение между вкладками
1. Пользователь выбирает вкладку модуля в панели вкладок.
2. Активная вкладка подсвечивается, остальные остаются доступными для быстрого выбора.
3. В рабочей области отображается результат запросов выбранного модуля.

### Что меняется в интерфейсе при смене вкладки
- **Меняется:**
  - набор запросов и логика работы модуля;
  - результаты запросов (как правило, таблицы с данными);
  - контекстные действия, относящиеся к выбранному модулю.
- **Остаётся единым:**
  - глобальная шапка приложения;
  - общие панели навигации/настроек;
  - индикаторы статуса системы (онлайн, уведомления).

## 2. Ключевые сущности

### `Tab`
Сущность пользовательской вкладки, связанной с модулем.
- `id`: уникальный идентификатор вкладки.
- `title`: отображаемое имя вкладки.
- `moduleId`: ссылка на модуль, который обслуживает вкладка.
- `isActive`: признак активной вкладки.

### `Module`
Сущность бизнес-модуля, определяющего тип запросов и формат результатов.
- `id`: уникальный идентификатор модуля.
- `name`: имя модуля.
- `requestTypes`: список поддерживаемых типов запросов.
- `resultSchema`: описание формата результата (обычно табличного).

### `RequestType`
Тип запроса или контекста модуля (например, `analytics`, `reports`, `catalog`).
Используется для конфигурации API-вызовов и UI-подсказок.

### `GlobalLayout`
Глобальный каркас интерфейса.
- содержит шапку, общие панели и контейнер рабочей области;
- управляет списком вкладок и текущей активной вкладкой;
- обеспечивает доступ к глобальным состояниям (статус, уведомления).

## 3. Правила связи

- **Одна вкладка → один модуль**: каждой вкладке соответствует ровно один `Module`.
- `Tab.moduleId` указывает на конкретный `Module`.
- Глобальные панели и шапка остаются общими для всех вкладок.
- Рабочая область отображает результат запросов активного модуля.

## 4. Базовый UI-каркас и структура

**Выбор:** React + Next.js (App Router) + компонентный подход.

### Предлагаемая структура компонентов
- `GlobalLayout`
  - `Header` (шапка, бренд, глобальные действия)
  - `TabBar` (список вкладок/модулей, переключение)
  - `MainArea` (рабочая область)
    - `ModuleView` (результаты запросов выбранного модуля)
    - `RequestPanel` (управление запросами/фильтрами)

### Состояния верхнего уровня
- `tabs: Tab[]`
- `activeTabId: string`
- `modules: Record<string, Module>`

## 5. Схема потоков (flow)

```
Пользователь → [TabBar] → (выбрать модуль)
   ↓
[GlobalLayout] → обновляет activeTabId
   ↓
[MainArea] → рендерит ModuleView для moduleId
   ↓
[Module] → выполняет запросы и показывает таблицу данных
```
